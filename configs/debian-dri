include $(TOP)/configs/debian

CONFIG_NAME = debian-dri

ifeq ($(DEB_HOST_ARCH_OS),hurd)
# Switch to debian-indirect target
    include $(TOP)/configs/debian-indirect
else

DEBIAN_COMMON_CPPFLAGS += -DPTHREADS -DUSE_EXTERNAL_DXTN_LIB=1 -DIN_DRI_DRIVER -DGLX_DIRECT_RENDERING -DHAVE_ALIAS -DDEFAULT_DRIVER_DIR=\"$(DEBIAN_DRIVERS_DIR)\"

LIBDRM_LIB = `pkg-config --libs libdrm`
DRI_LIB_DEPS  = -lm -lpthread -lexpat -ldl $(LIBDRM_LIB)
GL_LIB_DEPS = `pkg-config --libs x11 xext xxf86vm` -lm -lpthread -ldl $(LIBDRM_LIB)
LIBDRM_CFLAGS = `pkg-config --cflags libdrm`

USING_EGL=0

# Directories
ifeq ($(USING_EGL), 1)
override SRC_DIRS = egl glx/x11 mesa
PROGRAM_DIRS = egl
else
override SRC_DIRS = glx/x11 mesa
PROGRAM_DIRS =
endif

DRIVER_DIRS = dri
WINDOW_SYSTEM=dri

DRI_DIRS = mach64 mga r128 r200 r300 radeon s3v savage tdfx trident

ifeq ($(DEB_HOST_ARCH),i386)
DRI_DIRS += i810 i915 sis ffb unichrome
endif

ifeq ($(DEB_HOST_ARCH),amd64)
DRI_DIRS += i915
endif

endif # DRI or debian-indirect
