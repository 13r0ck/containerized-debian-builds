---
 configs/debian-default                    |   17 ++++++
 configs/debian-dri-amd64                  |    9 +++
 configs/debian-dri-any                    |    9 +++
 configs/debian-dri-default                |   36 ++++++++++++++
 configs/debian-dri-i386                   |    9 +++
 configs/debian-dri-i386-i686              |   14 +++++
 configs/debian-dri-optimized-default      |   13 +++++
 configs/debian-indirect-default           |    7 ++
 configs/debian-indirect-hurd-i386         |    9 +++
 configs/debian-osmesa                     |    9 +++
 configs/debian-osmesa-default             |   10 ++++
 configs/debian-osmesa-static              |    9 +++
 configs/debian-osmesa16                   |   10 ++++
 configs/debian-osmesa16-static            |   10 ++++
 configs/debian-osmesa32                   |   10 ++++
 configs/debian-osmesa32-static            |   10 ++++
 configs/debian-swx11+glu-alpha-ev5        |   12 ++++
 configs/debian-swx11+glu-amd64            |   10 ++++
 configs/debian-swx11+glu-any              |    9 +++
 configs/debian-swx11+glu-default          |   14 +++++
 configs/debian-swx11+glu-i386             |   10 ++++
 configs/debian-swx11+glu-i386-i686        |   14 +++++
 configs/debian-swx11+glu-powerpc-603      |   13 +++++
 configs/debian-swx11+glu-ppc64            |   11 ++++
 configs/debian-swx11+glu-sparc            |   10 ++++
 configs/debian-swx11+glu-sparc-ultrasparc |   13 +++++
 configs/debian-swx11+glu-static-amd64     |   10 ++++
 configs/debian-swx11+glu-static-any       |   10 ++++
 configs/debian-swx11+glu-static-i386      |   10 ++++
 configs/debian-swx11+glu-static-ppc64     |   11 ++++
 configs/default-bp                        |   75 ++++++++++++++++++++++++++++++
 configs/linux-dri-bp                      |   55 ++++++++++++++++++++++
 configs/linux-osmesa                      |   14 ++++-
 configs/linux-osmesa-static               |   15 ++++++
 configs/linux-osmesa16                    |   20 +-------
 configs/linux-osmesa16-static             |   19 -------
 configs/linux-osmesa32                    |   17 +-----
 configs/linux-osmesa32-static             |   13 +++++
 configs/linux-tcc                         |   22 ++++++++
 39 files changed, 550 insertions(+), 48 deletions(-)

Index: mesa/configs/debian-default
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-default	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,17 @@
+# Define Debian-specific defaults.
+
+CONFIG_NAME = debian-default
+
+OPT_FLAGS = -O2 -g
+
+# override settings in configs/linux-x86-64
+LIB_DIR = lib
+EXTRA_LIB_PATH =
+
+SRC_DIRS = mesa
+PROGRAM_DIRS =
+
+INSTALL_DIR = /usr
+
+# vim: ft=make
+
Index: mesa/configs/debian-dri-amd64
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-dri-amd64	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,9 @@
+# Configuration for building the DRI drivers on i386.
+
+include $(TOP)/configs/linux-dri-x86-64
+include $(TOP)/configs/debian-dri-default
+
+CONFIG_NAME = debian-dri-amd64
+
+# vim: ft=make
+
Index: mesa/configs/debian-dri-any
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-dri-any	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,9 @@
+# Configuration for building the DRI drivers on the build architecture.
+
+include $(TOP)/configs/linux-dri
+include $(TOP)/configs/debian-dri-default
+
+CONFIG_NAME = debian-dri-any
+
+# vim: ft=make
+
Index: mesa/configs/debian-dri-default
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-dri-default	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,36 @@
+# Configuration defaults for building the DRI drivers and DRI/GLX-enabled
+# libGL.
+
+include $(TOP)/configs/debian-default
+
+CONFIG_NAME = debian-dri-default
+
+SRC_DIRS = glx/x11 mesa progs
+DRIVER_DIRS = dri
+PROGRAM_DIRS = xdemos
+PROGS = glxdemo \
+        glxgears \
+        glxheads \
+        glxinfo
+
+LIB_DIR = lib/glx
+
+DRI_DRIVER_INSTALL_DIR = $(INSTALL_DIR)/lib/dri
+DRI_DRIVER_SEARCH_DIR = /usr/lib/dri
+
+DRI_DIRS = mach64 mga r128 r200 r300 radeon s3v savage tdfx trident
+
+ARCH_X86 = i386 amd64
+
+ifneq ($(findstring $(DEB_BUILD_ARCH), $(ARCH_X86)),)
+	DRI_DIRS += i810 i915 i915tex i965 sis unichrome
+endif
+
+ifeq ($(DEB_BUILD_ARCH), sparc)
+	DRI_DIRS += ffb
+endif
+
+APP_LIB_DEPS = -L$(TOP)/$(LIB_DIR) -l$(GL_LIB)
+
+# vim: ft=make
+
Index: mesa/configs/debian-dri-i386
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-dri-i386	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,9 @@
+# Configuration for building the DRI drivers on i386.
+
+include $(TOP)/configs/linux-dri-x86
+include $(TOP)/configs/debian-dri-default
+
+CONFIG_NAME = debian-dri-i386
+
+# vim: ft=make
+
Index: mesa/configs/debian-dri-i386-i686
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-dri-i386-i686	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,14 @@
+# Configuration for building the DRI drivers on i386.
+
+include $(TOP)/configs/linux-dri-x86
+include $(TOP)/configs/debian-dri-optimized-default
+
+CONFIG_NAME = debian-dri-i386-i686
+
+ARCH_FLAGS = -march=i686
+LIB_DIR = lib/glx/i686/cmov
+
+DRI_DRIVER_INSTALL_DIR = $(INSTALL_DIR)/lib/dri/i686/cmov
+
+# vim: ft=make
+
Index: mesa/configs/debian-dri-optimized-default
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-dri-optimized-default	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,13 @@
+# Configuration defaults for CPU-optimized builds of the DRI drivers and
+# DRI/GLX-enabled libGL.
+
+include $(TOP)/configs/debian-dri-default
+
+CONFIG_NAME = debian-dri-optimized-default
+
+# override so that the utility programs are not rebuilt with CPU-specific
+# optimizations
+SRC_DIRS = glx/x11 mesa
+
+# vim: ft=make
+
Index: mesa/configs/debian-indirect-default
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-indirect-default	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,7 @@
+# Configuration defaults for building GLX-enabled libGL.
+
+include $(TOP)/configs/debian-dri-default
+
+CONFIG_NAME = debian-indirect-default
+
+DRI_DIRS = 
Index: mesa/configs/debian-indirect-hurd-i386
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-indirect-hurd-i386	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,9 @@
+# Configuration for building the DRI drivers on the build architecture.
+
+include $(TOP)/configs/linux-indirect
+include $(TOP)/configs/debian-indirect-default
+
+CONFIG_NAME = debian-indirect-hurd-i386
+
+# vim: ft=make
+
Index: mesa/configs/debian-osmesa
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-osmesa	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,9 @@
+# Configuration for building only OSMesa on Debian.
+
+include $(TOP)/configs/linux-osmesa
+include $(TOP)/configs/debian-osmesa-default
+
+CONFIG_NAME = debian-osmesa
+
+# vim: ft=make
+
Index: mesa/configs/debian-osmesa-default
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-osmesa-default	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,10 @@
+# Configuration defaults for building OSMesa.
+
+include $(TOP)/configs/debian-default
+
+CONFIG_NAME = debian-osmesa-default
+
+DRIVER_DIRS = osmesa
+
+# vim: ft=make
+
Index: mesa/configs/debian-osmesa-static
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-osmesa-static	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,9 @@
+# Configuration for building only OSMesa (static version) on Debian.
+
+include $(TOP)/configs/linux-osmesa-static
+include $(TOP)/configs/debian-osmesa-default
+
+CONFIG_NAME = debian-osmesa-static
+
+# vim: ft=make
+
Index: mesa/configs/debian-osmesa16
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-osmesa16	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,10 @@
+# Configuration for building OSMesa with support for 16 bits per color
+# channel.
+
+include $(TOP)/configs/linux-osmesa16
+include $(TOP)/configs/debian-osmesa-default
+
+CONFIG_NAME = debian-osmesa16
+
+# vim: ft=make
+
Index: mesa/configs/debian-osmesa16-static
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-osmesa16-static	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,10 @@
+# Configuration for building a static version of OSMesa with support for 16
+# bits per color channel.
+
+include $(TOP)/configs/linux-osmesa16-static
+include $(TOP)/configs/debian-osmesa-default
+
+CONFIG_NAME = debian-osmesa16-static
+
+# vim: ft=make
+
Index: mesa/configs/debian-osmesa32
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-osmesa32	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,10 @@
+# Configuration for building OSMesa with support for 32 bits per color
+# channel.
+
+include $(TOP)/configs/linux-osmesa32
+include $(TOP)/configs/debian-osmesa-default
+
+CONFIG_NAME = debian-osmesa32
+
+# vim: ft=make
+
Index: mesa/configs/debian-osmesa32-static
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-osmesa32-static	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,10 @@
+# Configuration for building a static version of OSMesa with support for 32
+# bits per color channel.
+
+include $(TOP)/configs/linux-osmesa32-static
+include $(TOP)/configs/debian-osmesa-default
+
+CONFIG_NAME = debian-osmesa32-static
+
+# vim: ft=make
+
Index: mesa/configs/debian-swx11+glu-alpha-ev5
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-swx11+glu-alpha-ev5	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,12 @@
+# Configuration for building Mesa (swx11 and GLU) on alpha (ev5 optimized).
+
+include $(TOP)/configs/linux-alpha
+include $(TOP)/configs/debian-swx11+glu-default
+
+CONFIG_NAME = debian-swx11+glu-alpha-ev5
+
+SRC_DIRS = mesa
+LIB_DIR = lib/ev5/cmov
+
+# vim: ft=make
+
Index: mesa/configs/debian-swx11+glu-amd64
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-swx11+glu-amd64	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,10 @@
+# Configuration for building Mesa (swx11 and GLU) with runtime-detected
+# assembler optimizations on amd64.
+
+include $(TOP)/configs/linux-x86-64
+include $(TOP)/configs/debian-swx11+glu-default
+
+CONFIG_NAME = debian-swx11+glu-amd64
+
+# vim: ft=make
+
Index: mesa/configs/debian-swx11+glu-any
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-swx11+glu-any	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,9 @@
+# Configuration for building Mesa (swx11 and GLU) on the build architecture.
+
+include $(TOP)/configs/linux
+include $(TOP)/configs/debian-swx11+glu-default
+
+CONFIG_NAME = debian-swx11+glu-any
+
+# vim: ft=make
+
Index: mesa/configs/debian-swx11+glu-default
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-swx11+glu-default	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,14 @@
+# Configuration defaults for building Mesa (swx11 and GLU).
+
+include $(TOP)/configs/debian-default
+
+CONFIG_NAME = debian-swx11+glu-default
+
+SRC_DIRS = mesa glu glw
+DRIVER_DIRS = x11
+
+GLW_SOURCES += GLwMDrawA.c
+GLW_LIB_DEPS += -lXm
+
+# vim: ft=make
+
Index: mesa/configs/debian-swx11+glu-i386
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-swx11+glu-i386	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,10 @@
+# Configuration for building Mesa (swx11 and GLU) with runtime-detected
+# assembler optimizations on i386.
+
+include $(TOP)/configs/linux-x86
+include $(TOP)/configs/debian-swx11+glu-default
+
+CONFIG_NAME = debian-swx11+glu-i386
+
+# vim: ft=make
+
Index: mesa/configs/debian-swx11+glu-i386-i686
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-swx11+glu-i386-i686	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,14 @@
+# Configuration for building Mesa (swx11 and GLU) with runtime-detected
+# assembler optimizations on i386 (i686 optimized).
+
+include $(TOP)/configs/linux-x86
+include $(TOP)/configs/debian-swx11+glu-default
+
+CONFIG_NAME = debian-swx11+glu-i386-i686
+
+ARCH_FLAGS += -march=i686
+SRC_DIRS = mesa
+LIB_DIR = lib/i686/cmov
+
+# vim: ft=make
+
Index: mesa/configs/debian-swx11+glu-powerpc-603
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-swx11+glu-powerpc-603	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,13 @@
+# Configuration for building Mesa (swx11 and GLU) with runtime-detected
+# assembler optimizations on powerpc (603 optimized).
+
+include $(TOP)/configs/linux-ppc
+include $(TOP)/configs/debian-swx11+glu-default
+
+CONFIG_NAME = debian-swx11+glu-powerpc-603
+
+SRC_DIRS = mesa
+LIB_DIR = lib/603/cmov
+
+# vim: ft=make
+
Index: mesa/configs/debian-swx11+glu-ppc64
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-swx11+glu-ppc64	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,11 @@
+# Configuration for building Mesa (swx11 and GLU) with runtime-detected
+# assembler optimizations on ppc64.
+
+include $(TOP)/configs/debian-swx11+glu-any
+
+CONFIG_NAME = debian-swx11+glu-ppc64
+
+LIB_DIR = lib64
+
+# vim: ft=make
+
Index: mesa/configs/debian-swx11+glu-sparc
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-swx11+glu-sparc	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,10 @@
+# Configuration for building Mesa (swx11 and GLU) with runtime-detected
+# assembler optimizations on sparc.
+
+include $(TOP)/configs/linux-sparc
+include $(TOP)/configs/debian-swx11+glu-default
+
+CONFIG_NAME = debian-swx11+glu-sparc
+
+# vim: ft=make
+
Index: mesa/configs/debian-swx11+glu-sparc-ultrasparc
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-swx11+glu-sparc-ultrasparc	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,13 @@
+# Configuration for building Mesa (swx11 and GLU) with runtime-detected
+# assembler optimizations on sparc (ultrasparc-optimized).
+
+include $(TOP)/configs/linux-ultrasparc
+include $(TOP)/configs/debian-swx11+glu-default
+
+CONFIG_NAME = debian-swx11+glu-sparc-ultrasparc
+
+SRC_DIRS = mesa
+LIB_DIR = lib/ultrasparc/cmov
+
+# vim: ft=make
+
Index: mesa/configs/debian-swx11+glu-static-amd64
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-swx11+glu-static-amd64	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,10 @@
+# Configuration for building static versions of the libraries (swx11 and GLU)
+# on amd64.
+
+include $(TOP)/configs/linux-x86-64-static
+include $(TOP)/configs/debian-swx11+glu-default
+
+CONFIG_NAME = debian-swx11+glu-static-amd64
+
+# vim: ft=make
+
Index: mesa/configs/debian-swx11+glu-static-any
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-swx11+glu-static-any	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,10 @@
+# Configuration for building static versions of the libraries (swx11 and GLU)
+# on the build architecture.
+
+include $(TOP)/configs/linux-static
+include $(TOP)/configs/debian-swx11+glu-default
+
+CONFIG_NAME = debian-swx11+glu-static-any
+
+# vim: ft=make
+
Index: mesa/configs/debian-swx11+glu-static-i386
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-swx11+glu-static-i386	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,10 @@
+# Configuration for building static versions of the libraries (swx11 and GLU)
+# on i386.
+
+include $(TOP)/configs/linux-x86-static
+include $(TOP)/configs/debian-swx11+glu-default
+
+CONFIG_NAME = debian-swx11+glu-static-i386
+
+# vim: ft=make
+
Index: mesa/configs/debian-swx11+glu-static-ppc64
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/debian-swx11+glu-static-ppc64	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,11 @@
+# Configuration for building static versions of the libraries (swx11 and GLU)
+# on ppc64.
+
+include $(TOP)/configs/debian-swx11+glu-static-any
+
+CONFIG_NAME = debian-swx11+glu-static-ppc64
+
+LIB_DIR = lib64
+
+# vim: ft=make
+
Index: mesa/configs/default-bp
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/default-bp	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,75 @@
+# Default/template configuration
+
+# This is included by other config files which may override some
+# of these variables.
+
+CONFIG_NAME = default
+
+# Version info
+MESA_MAJOR=6
+MESA_MINOR=3
+MESA_TINY=0
+
+# external projects
+#DRM_SOURCE_PATH=$(TOP)/../drm
+DRM_SOURCE_PATH=/home/projects/DRI-freedesktop/drm
+
+# Compiler and flags
+CC = cc
+CXX = CC
+CFLAGS = -O
+CXXFLAGS = -O
+GLU_CFLAGS = 
+
+# Misc tools and flags
+MKLIB_OPTIONS = 
+MKDEP = makedepend
+MKDEP_OPTIONS = -fdepend
+MAKE = make
+
+# Library names (base name)
+GL_LIB = GL
+GLU_LIB = GLU
+GLUT_LIB = glut
+GLW_LIB = GLw
+OSMESA_LIB = OSMesa
+
+
+# Library names (actual file names)
+GL_LIB_NAME = lib$(GL_LIB).so
+GLU_LIB_NAME = lib$(GLU_LIB).so
+GLUT_LIB_NAME = lib$(GLUT_LIB).so
+GLW_LIB_NAME = lib$(GLW_LIB).so
+OSMESA_LIB_NAME = lib$(OSMesa).so
+
+
+# Optional assembly language optimization files for libGL
+ASM_SOURCES = 
+
+# GLw widget sources (Append "GLwMDrawA.c" here and add -lXm to GLW_LIB_DEPS in
+# order to build the Motif widget too)
+GLW_SOURCES = GLwDrawA.c
+
+
+# Directories
+LIB_DIR = $(TOP)/lib
+INSTALL_PREFIX = /usr/local
+SRC_DIRS = mesa glu glut/glx glw
+GLU_DIRS = sgi
+DRIVER_DIRS = x11 osmesa
+# Which subdirs under $(TOP)/progs/ to enter:
+PROGRAM_DIRS = demos redbook samples xdemos
+
+
+# Library/program dependencies
+GL_LIB_DEPS = -lX11 -lXext -lm -lpthread
+OSMESA_LIB_DEPS = -L$(LIB_DIR) -l$(GL_LIB)
+GLU_LIB_DEPS = -L$(LIB_DIR) -l$(GL_LIB) -lm
+GLUT_LIB_DEPS = -L$(LIB_DIR) -l$(GLU_LIB) -l$(GL_LIB) -lX11 -lXmu -lXt -lXi -lm
+GLW_LIB_DEPS = -L$(LIB_DIR) -l$(GL_LIB) -lXt -lX11
+APP_LIB_DEPS = -L$(LIB_DIR) -l$(GLUT_LIB) -l$(GLU_LIB) -l$(GL_LIB) -lm
+
+
+# Shading language support (set to 0 or 1)
+SHADING_LANGUAGE = 0
+
Index: mesa/configs/linux-dri-bp
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/linux-dri-bp	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,55 @@
+# -*-makefile-*-
+# Configuration for linux-dri: Linux DRI hardware drivers for XFree86 & others
+
+include $(TOP)/configs/default
+
+CONFIG_NAME = linux-dri
+
+# Compiler and flags
+CC = gcc
+CXX = g++
+
+MKDEP = /usr/X11R6/bin/makedepend
+#MKDEP = gcc -M
+#MKDEP_OPTIONS = -MF depend
+
+WARN_FLAGS = -Wall
+OPT_FLAGS  = -g
+PIC_FLAGS  = -fPIC
+
+# Add '-DGLX_USE_TLS' to ARCH_FLAGS to enable TLS support.
+ARCH_FLAGS ?=
+
+DEFINES = -D_POSIX_SOURCE -D_POSIX_C_SOURCE=199309L -D_SVID_SOURCE \
+	-D_BSD_SOURCE -D_GNU_SOURCE \
+	-DDRI_NEW_INTERFACE_ONLY -DPTHREADS -DUSE_EXTERNAL_DXTN_LIB=1 
+
+X11_INCLUDES = -I/usr/X11R6/include -I/usr/X11R6/include/X11/extensions
+
+CFLAGS   = $(WARN_FLAGS) $(OPT_FLAGS) $(PIC_FLAGS) $(ARCH_FLAGS) $(DEFINES) \
+	$(ASM_FLAGS) -std=c99 -ffast-math 
+
+CXXFLAGS = $(WARN_FLAGS) $(OPT_FLAGS) $(PIC_FLAGS) $(ARCH_FLAGS) $(DEFINES)
+
+
+ASM_SOURCES = 
+
+# Library/program dependencies
+EXTRA_LIB_PATH=-L/usr/X11R6/lib
+
+DRI_LIB_DEPS  = $(EXTRA_LIB_PATH) -lm -lpthread -lexpat -ldl
+GL_LIB_DEPS   = $(EXTRA_LIB_PATH) -lX11 -lXext -lXxf86vm -lm -lpthread -ldl
+GLUT_LIB_DEPS = $(EXTRA_LIB_PATH) -L$(LIB_DIR) -l$(GLU_LIB) -l$(GL_LIB)  -lX11 -lXmu -lXt -lXi -lm
+GLW_LIB_DEPS  = $(EXTRA_LIB_PATH) -L$(LIB_DIR) -l$(GL_LIB) -lXt -lX11
+
+
+# Directories
+SRC_DIRS = glx/x11 mesa glu glut/glx glw
+DRIVER_DIRS = dri
+PROGRAM_DIRS = 
+WINDOW_SYSTEM=dri
+
+# ffb and gamma are missing because they have not been converted to use the new
+# interface.
+DRI_DIRS = dri_client i810 i830 i915 mach64 mga r128 r200 radeon s3v \
+	savage sis tdfx trident unichrome fb
Index: mesa/configs/linux-osmesa-static
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/linux-osmesa-static	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,15 @@
+# Configuration for building only libOSMesa on Linux, no Xlib driver
+# This doesn't really have any Linux dependencies, so it should be usable
+# on other (gcc-based) systems.
+
+include $(TOP)/configs/linux-osmesa
+
+CONFIG_NAME = linux-osmesa-static
+
+# Compiler and flags
+MKLIB_OPTIONS = -static
+PIC_FLAGS =
+
+# Library names
+OSMESA_LIB_NAME = lib$(OSMESA_LIB).a
+
Index: mesa/configs/linux-osmesa32-static
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/linux-osmesa32-static	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,13 @@
+# Configuration for 32 bits/channel OSMesa library on Linux
+
+include $(TOP)/configs/linux-osmesa32
+
+CONFIG_NAME = linux-osmesa32-static
+
+# Compiler and flags
+MKLIB_OPTIONS = -static
+PIC_FLAGS =
+
+# Library names
+OSMESA_LIB_NAME = lib$(OSMESA_LIB).a
+
Index: mesa/configs/linux-tcc
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ mesa/configs/linux-tcc	2008-06-17 19:27:49.000000000 +0200
@@ -0,0 +1,22 @@
+# Configuration for debugging on Linux
+
+include $(TOP)/configs/default
+
+CONFIG_NAME = linux-tcc
+
+# Compiler and flags
+CC = gcc
+CXX = g++
+
+TCC_DIR=/home/progs/tcc-0.9.20
+
+CFLAGS = -g -ansi -pedantic -Wall -Wmissing-prototypes -Wundef -fPIC -ffast-math -D_POSIX_SOURCE -D_SVID_SOURCE -D_BSD_SOURCE -I/usr/X11R6/include -DUSE_XSHM -DPTHREADS -DDEBUG -DMESA_DEBUG -DUSE_TCC -I$(TCC_DIR)
+
+CXXFLAGS = -g -ansi -pedantic -Wall -Wundef -fPIC -ffast-math -D_POSIX_SOURCE -D_SVID_SOURCE -D_BSD_SOURCE -DDEBUG -DMESA_DEBUG
+
+GLUT_CFLAGS = -fexceptions
+
+GL_LIB_DEPS = -L/usr/X11R6/lib -lX11 -lXext -lm -lpthread -L$(TCC_DIR) -ltcc -ldl
+GLUT_LIB_DEPS = -L$(LIB_DIR) -l$(GLU_LIB) -l$(GL_LIB) -L/usr/X11R6/lib -lX11 -lXmu -lXt -lXi -lm
+GLW_LIB_DEPS = -L$(LIB_DIR) -l$(GL_LIB) -lXt -L/usr/X11R6/lib -lX11
+APP_LIB_DEPS = -L$(LIB_DIR) -l$(GLUT_LIB) -l$(GLU_LIB) -l$(GL_LIB) -lm
Index: mesa/configs/linux-osmesa
===================================================================
--- mesa.orig/configs/linux-osmesa	2008-06-16 00:50:38.000000000 +0200
+++ mesa/configs/linux-osmesa	2008-06-17 19:27:49.000000000 +0200
@@ -9,8 +9,17 @@
 # Compiler and flags
 CC = gcc
 CXX = g++
-CFLAGS = -O3 -ansi -pedantic -fPIC -ffast-math -D_POSIX_SOURCE -D_POSIX_C_SOURCE=199309L -D_SVID_SOURCE -D_BSD_SOURCE -DPTHREADS
-CXXFLAGS = -O3 -ansi -pedantic -fPIC -ffast-math -D_POSIX_SOURCE -D_POSIX_C_SOURCE=199309L -D_SVID_SOURCE -D_BSD_SOURCE
+
+PIC_FLAGS  = -fPIC
+
+DEFINES = -D_POSIX_SOURCE -D_POSIX_C_SOURCE=199309L -D_SVID_SOURCE \
+	-D_BSD_SOURCE -D_GNU_SOURCE \
+	-DPTHREADS -DUSE_XSHM -DHAVE_POSIX_MEMALIGN
+
+CFLAGS = -ansi -pedantic $(OPT_FLAGS) $(PIC_FLAGS) $(ARCH_FLAGS) $(DEFINES) \
+	$(ASM_FLAGS) -ffast-math
+
+CXXFLAGS = -ansi -pedantic $(OPT_FLAGS) $(PIC_FLAGS) $(ARCH_FLAGS) $(DEFINES)
 
 # Work around aliasing bugs - developers should comment this out
 CFLAGS += -fno-strict-aliasing
@@ -26,3 +35,4 @@
 OSMESA_LIB_DEPS = -lm -lpthread
 GLU_LIB_DEPS = -L$(TOP)/$(LIB_DIR) -l$(OSMESA_LIB)
 APP_LIB_DEPS = -lOSMesa -lGLU
+
Index: mesa/configs/linux-osmesa16
===================================================================
--- mesa.orig/configs/linux-osmesa16	2008-06-16 00:50:38.000000000 +0200
+++ mesa/configs/linux-osmesa16	2008-06-17 19:27:49.000000000 +0200
@@ -1,31 +1,19 @@
 # Configuration for 16 bits/channel OSMesa library on Linux
 
-include $(TOP)/configs/default
+include $(TOP)/configs/linux-osmesa
 
 CONFIG_NAME = linux-osmesa16
 
-# Compiler and flags
-CC = gcc
-CXX = g++
-CFLAGS = -O3 -ansi -pedantic -fPIC -ffast-math -D_POSIX_SOURCE -D_POSIX_C_SOURCE=199309L -D_SVID_SOURCE -D_BSD_SOURCE -DUSE_XSHM -DPTHREADS -I/usr/X11R6/include -DCHAN_BITS=16 -DDEFAULT_SOFTWARE_DEPTH_BITS=31
-CXXFLAGS = -O3 -ansi -pedantic -fPIC -ffast-math -D_POSIX_SOURCE -D_POSIX_C_SOURCE=199309L -D_SVID_SOURCE -D_BSD_SOURCE
-
 # Work around aliasing bugs - developers should comment this out
 CFLAGS += -fno-strict-aliasing
 CXXFLAGS += -fno-strict-aliasing
-
+DEFINES += -DCHAN_BITS=16 -DDEFAULT_SOFTWARE_DEPTH_BITS=32
 # Library names
 OSMESA_LIB = OSMesa16
-OSMESA_LIB_NAME = libOSMesa16.so
-
 
 # Directories
-SRC_DIRS = mesa glu
-DRIVER_DIRS = osmesa
 PROGRAM_DIRS = 
 
-
 # Dependencies
-OSMESA_LIB_DEPS = -lm -lpthread
-GLU_LIB_DEPS = -L$(TOP)/$(LIB_DIR) -l$(OSMESA_LIB)
-APP_LIB_DEPS = -lOSMesa16
+APP_LIB_DEPS = -l$(OSMESA_LIB)
+
Index: mesa/configs/linux-osmesa16-static
===================================================================
--- mesa.orig/configs/linux-osmesa16-static	2008-06-16 00:50:38.000000000 +0200
+++ mesa/configs/linux-osmesa16-static	2008-06-17 19:27:49.000000000 +0200
@@ -1,14 +1,10 @@
 # Configuration for 16 bits/channel OSMesa library on Linux
 
-include $(TOP)/configs/default
+include $(TOP)/configs/linux-osmesa16
 
 CONFIG_NAME = linux-osmesa16-static
 
 # Compiler and flags
-CC = gcc
-CXX = g++
-CFLAGS = -O3 -ansi -pedantic -ffast-math -D_POSIX_SOURCE -D_POSIX_C_SOURCE=199309L -D_SVID_SOURCE -D_BSD_SOURCE -DUSE_XSHM -DPTHREADS -I/usr/X11R6/include -DCHAN_BITS=16 -DDEFAULT_SOFTWARE_DEPTH_BITS=31
-CXXFLAGS = -O3 -ansi -pedantic -ffast-math -D_POSIX_SOURCE -D_POSIX_C_SOURCE=199309L -D_SVID_SOURCE -D_BSD_SOURCE
 MKLIB_OPTIONS = -static
 PIC_FLAGS =
 
@@ -17,16 +13,5 @@
 CXXFLAGS += -fno-strict-aliasing
 
 # Library names
-OSMESA_LIB = OSMesa16
-OSMESA_LIB_NAME = libOSMesa16.a
+OSMESA_LIB_NAME = lib$(OSMESA_LIB).a
 
-
-# Directories
-SRC_DIRS = mesa glu
-DRIVER_DIRS = osmesa
-PROGRAM_DIRS = 
-
-
-# Dependencies
-OSMESA_LIB_DEPS = -lm -lpthread
-APP_LIB_DEPS = -lOSMesa16
Index: mesa/configs/linux-osmesa32
===================================================================
--- mesa.orig/configs/linux-osmesa32	2008-06-16 00:50:38.000000000 +0200
+++ mesa/configs/linux-osmesa32	2008-06-17 19:27:49.000000000 +0200
@@ -1,31 +1,22 @@
 # Configuration for 32 bits/channel OSMesa library on Linux
 
-include $(TOP)/configs/default
+include $(TOP)/configs/linux-osmesa
 
 CONFIG_NAME = linux-osmesa32
 
 # Compiler and flags
-CC = gcc
-CXX = g++
-CFLAGS = -O3 -ansi -pedantic -fPIC -ffast-math -D_POSIX_SOURCE -D_POSIX_C_SOURCE=199309L -D_SVID_SOURCE -D_BSD_SOURCE -DUSE_XSHM -DPTHREADS -I/usr/X11R6/include -DCHAN_BITS=32 -DDEFAULT_SOFTWARE_DEPTH_BITS=31
-CXXFLAGS = -O3 -ansi -pedantic -fPIC -ffast-math -D_POSIX_SOURCE -D_POSIX_C_SOURCE=199309L -D_SVID_SOURCE -D_BSD_SOURCE
 
 # Work around aliasing bugs - developers should comment this out
 CFLAGS += -fno-strict-aliasing
 CXXFLAGS += -fno-strict-aliasing
+DEFINES += -DCHAN_BITS=32 -DDEFAULT_SOFTWARE_DEPTH_BITS=31
 
 # Library names
 OSMESA_LIB = OSMesa32
-OSMESA_LIB_NAME = libOSMesa32.so
-
 
 # Directories
-SRC_DIRS = mesa glu
-DRIVER_DIRS = osmesa
 PROGRAM_DIRS = 
 
-
 # Dependencies
-OSMESA_LIB_DEPS = -lm -lpthread
-GLU_LIB_DEPS = -L$(TOP)/$(LIB_DIR) -l$(OSMESA_LIB)
-APP_LIB_DEPS = -lOSMesa32
+APP_LIB_DEPS = -l$(OSMESA_LIB)
+
